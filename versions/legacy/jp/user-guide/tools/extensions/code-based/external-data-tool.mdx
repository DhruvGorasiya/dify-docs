---
title: 外部データツール
version: '日本語'
---

## 機能概要

[ナレッジベース](../../../knowledge-base/knowledge-base-creation/upload-documents) 機能を利用することで、開発者はさまざまな形式の長文や構造化データを直接アップロードし、データセットを構築できます。これにより、ユーザーがアップロードした最新のコンテキストに基づいて、AI アプリケーションが対話を行えるようになります。

さらに、**外部データツール** は、開発者が独自の検索機能や内部ナレッジベースなどの外部データを LLM のコンテキストとして利用できるようにするものであり、API 拡張を用いて外部データの取得とヒントワードの組み込みを実現します。データセットをクラウドにアップロードするよりも、**外部データツール** を活用することで、プライベートデータの安全性が確保され、カスタム検索やリアルタイムデータの取得において大きな利点があります。

## 実装の具体例

エンドユーザーが対話システムにリクエストを送信すると、プラットフォームのバックエンドは外部データツール（独自のAPIを呼び出す）をトリガーし、ユーザーの問題に関連する外部情報（例えば従業員データやリアルタイム記録など）をクエリします。APIは、現在のリクエストに関連する情報を返し、プラットフォームのバックエンドはその結果をテキストとしてまとめ、ヒントワードにコンテキストを注入して、よりパーソナライズされた回答を出力します。

## 操作手順

1. 外部データツールを使用する前に、APIと認証に利用するAPIキーを準備する必要があります。[external-data-tool](../api-based/external-data-tool) をご覧ください。
2. Dify は統合されたAPI管理を提供しており、設定画面でAPI拡張構成を一元的に追加することで、Dify上のさまざまなアプリケーションで直接利用できるようになります。

<Frame caption="APIベースの拡張機能">
  <img src="/ja-jp/user-guide/.gitbook/assets/api_based.png" alt="API-based Extension" />
</Frame>

3. 「Weather Inquiry」を例に取ります。"APIベースの拡張機能" ダイアログボックスに名前、APIエンドポイント、APIキーを入力し、保存します。

<Frame caption="天気照会">
  <img src="/ja-jp/user-guide/.gitbook/assets/weather inquiry.png" alt="Weather Inquiry" />
</Frame>

4. ヒントワードの編成ページで、「工具」の右側にある「+追加」ボタンをクリックし、開いた「ツールの追加」ダイアログボックスで、名前と変数名（変数名はヒントワードに参照されるため、英語で入力してください）を入力し、先ほど追加したAPIベースの拡張機能を選択します。

<Frame caption="外部データツール">
  <img src="/ja-jp/user-guide/.gitbook/assets/api_based_extension1.png" alt="External_data_tool" />
</Frame>

5. これにより、外部データをヒントワードに組み込むことができます。例えば、今日のロンドンの天気を調べたい場合は、`location` 変数を追加し、"London" と入力し、外部データツールの拡張変数名 `weather_data` を組み合わせてデバッグ出力を行います。

<Frame caption="天気検索ツール">
  <img src="/ja-jp/user-guide/.gitbook/assets/Weather_search_tool.jpeg" alt="Weather_search_tool" />
</Frame>

対話ログでは、APIが返すリアルタイムデータを確認できます：

<Frame caption="プロンプトログ">
  <img src="/ja-jp/user-guide/.gitbook/assets/log.jpeg" alt="Prompt Log" width="335" />
</Frame>