---
title: リソース仕様
---

> このページは先行公開版です。内容は今後予告なく更新される可能性があります。

デプロイを開始する前に、以下のリソースが準備されていることを確認してください。

# 要件

* Helm 3.14 以上
* Kubernetes 1.24 以上

<Warning>

1. **重要**：[ライセンスアクティベーション](/versions/3-0-x/ja-jp/deployment/license-activation)のために、IT 部門に必要な権限の提供を依頼してください。

   * ServiceAccount（必須）
   * Role / RoleBinding（必須）
2. **重要**：Kubernetes クラスターは CRD（[Custom Resource Definitions](https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/)）に対応している必要があります。
3. **重要**：Kubernetes クラスターは [https://marketplace.dify.ai/](https://marketplace.dify.ai/) へ接続できる必要があります。
4. **警告**：制限された環境（例：OpenShift）を使用している場合、Pod が `root` ユーザーとして実行できるようにしてください。

</Warning>

* 対応クラウドプロバイダー：
  * AWS, Azure, Aliyun, Tencent Cloud, GCP
* 対応コンテナレジストリ：

  * AWS ECR（with AK/SK or IRSA）/ Azure ACR / Aliyun ACR (with AK/SK) / Tencent TCR (with AK/SK) / Dockerhub / Google Artifact Registry
* 対応永続ストレージ：

  * S3 / AWS S3 (with AK/SK or IRSA) / Azure Blob / Aliyun OSS (with AK/SK) / Tencent COS (with AK/SK) / Google GCS

# 必要ドメイン設定

Dify Enterprise を運用するには、以下の **5つのドメイン** の設定が必要です：

| 用途              | ドメイン                    |
| --------------- | ----------------------- |
| コンソール           | `console.dify.local`    |
| サービス API        | `api.dify.local`        |
| Web アプリ         | `app.dify.local`        |
| ファイルアップロード      | `upload.dify.local`     |
| エンタープライズダッシュボード | `enterprise.dify.local` |

# テスト用デプロイリソース

* Kubernetes クラスター

  * ワーカーノード 1 台：4 CPU、16 GB メモリ
* コンテナレジストリ

  * AWS ECR / Azure ACR / Aliyun ACR (with AK/SK) / Tencent TCR (with AK/SK) / Dockerhub / Google Artifact Registry
* 永続ストレージ

  * S3 / AWS S3 / Azure Blob / Aliyun OSS (with AK/SK) / Tencent COS (with AK/SK) / Google GCS
  * 100 GB ストレージ
* PostgreSQL データベース

  * バージョン 14 以上
  * 2 CPU、4 GB メモリ
  * 256 GB ストレージ
* Redis データベース

  * バージョン 6 以上
  * 1 GB メモリ
* ベクトル DB 仮想マシン（Qdrant 単一ノード）

  * 仮想マシン 1 台
  * 4 CPU、8 GB メモリ
  * 100 GB ストレージ

# 本番用デプロイリソース

* Kubernetes クラスター

  * ワーカーノード 6 台（各 8 CPU、32 GB メモリ）
* コンテナレジストリ

  * AWS ECR / Azure ACR / Aliyun ACR (with AK/SK) / Tencent TCR (with AK/SK) / Dockerhub / Google Artifact Registry
* 永続ストレージ

  * S3 / AWS S3 / Azure Blob / Aliyun OSS (with AK/SK) / Tencent COS (with AK/SK) / Google GCS
  * 512 GB ストレージ
* PostgreSQL データベース

  * バージョン 14 以上
  * 4 CPU、8 GB メモリ
  * 512 GB `SSD` ストレージ
* Redis データベース

  * バージョン 6 以上
  * 2 GB メモリ
* ベクトル DB 仮想マシン（Qdrant クラスター構成）

  * 仮想マシン 3 台
  * 各 8 CPU、64 GB メモリ
  * 各 100 GB ストレージ