---
title: 自定义工具
description: 作者：Allen
---

自定义工具使得应用能够请求外部的 API 服务，扩展自身的能力边界。

## 功能简介

自定义工具允许你将任何符合 OpenAPI 标准的外部 API 集成到 Dify 工作区中。通过定义 API 的参数、方法和端点，你可以让 Dify 应用与外部服务进行交互，实现更广泛的功能。

目前支持两种规范：

- **OpenAPI / Swagger 规范**
- **ChatGPT Plugin 规范**

你可以通过直接粘贴 OpenAPI schema 内容或从 URL 导入的方式创建工具。关于 OpenAPI / Swagger 规范的详细说明，请参考[官方文档](https://swagger.io/specification/)。

## 创建自定义工具

<Steps>
  <Step title="进入创建界面">
    进入工作区后，点击导航栏的 **工具 → 自定义 → 创建自定义工具**。
    
    <Frame>
      ![创建自定义工具界面](https://assets-docs.dify.ai/2025/05/8149279369872d7d003eb5ea017440b9.png)
    </Frame>
  </Step>
  
  <Step title="导入 API 规范">
    你可以选择以下方式导入 API 规范：
    - 直接粘贴 JSON 或 YAML 格式的 OpenAPI 规范
    - 输入包含 OpenAPI 规范的 URL
    - 选择一个预设模板作为起点
    <Info>
      如需了解如何填写正确的 API 格式，请参考 [OpenAPI 示例](#openapi-示例)。
    </Info>
  </Step>
  
  <Step title="指定鉴权方式">
    Dify 目前支持两种鉴权方式：
    - **无鉴权**：适用于公开 API
    - **API Key**：需要提供密钥访问的 API
    
    导入 Schema 代码后，系统会自动解析文件内的参数，显示工具的详细信息，包括参数、方法和路径。
    
    <Frame>
      ![鉴权配置界面](https://assets-docs.dify.ai/2025/05/d66660d6b6321fff661358f4fa20c3a1.png)
    </Frame>
  </Step>
  
  <Step title="测试与保存">
    在保存前，你可以使用测试功能验证 API 是否能正常工作。测试成功后，点击保存完成创建。
  </Step>
</Steps>

## 使用自定义工具

完成自定义工具创建之后，工作区中的所有成员都可以在以下类型的应用中使用该工具：

- **Chatflow** - 对话式应用
- **Workflow** - 工作流应用
- **Agent** - 智能代理应用

在应用编辑界面中，导航至 **工具 → 自定义**，选择你创建的工具即可启用。

<Frame>
  ![在应用中使用自定义工具](https://assets-docs.dify.ai/2025/05/41d7ff489eb2dffff989523e2f4aeb1a.png)
</Frame>

## 开发自定义工具

“工具”已全面升级为“插件”生态，详细的工具开发过程请参考[插件开发](https://docs.dify.ai/zh-hans/plugins/quick-start/install-plugins)。

## 参考阅读

<Card title="OpenAPI 规范指南" icon="book" href="https://swagger.io/docs/specification/about/">
  了解如何编写符合标准的 OpenAPI 规范，创建更复杂、功能更丰富的自定义工具。
</Card>

### OpenAPI 示例

以下是几个可用于创建自定义工具的 OpenAPI 规范示例：

示例一：天气 API

```json Weather [expandable]
{
  "openapi": "3.1.0",
  "info": {
    "title": "Get weather data",
    "description": "Retrieves current weather data for a location.",
    "version": "v1.0.0"
  },
  "servers": [
    {
      "url": "https://weather.example.com"
    }
  ],
  "paths": {
    "/location": {
      "get": {
        "description": "Get temperature for a specific location",
        "operationId": "GetCurrentWeather",
        "parameters": [
          {
            "name": "location",
            "in": "query",
            "description": "The city and state to retrieve the weather for",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "deprecated": false
      }
    }
  },
  "components": {
    "schemas": {}
  }
}
```

示例二：宠物商店 YAML

```yaml PetStore [expandable]
openapi: "3.0.0"
info:
  version: 1.0.0
  title: Swagger Petstore
  license:
    name: MIT
servers:
  - url: https://petstore.swagger.io/v1
paths:
  /pets:
    get:
      summary: List all pets
      operationId: listPets
      tags:
        - pets
      parameters:
        - name: limit
          in: query
          description: How many items to return at one time (max 100)
          required: false
          schema:
            type: integer
            maximum: 100
            format: int32
      responses:
        '200':
          description: A paged array of pets
          headers:
            x-next:
              description: A link to the next page of responses
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Pets"
        default:
          description: unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create a pet
      operationId: createPets
      tags:
        - pets
      responses:
        '201':
          description: Null response
        default:
          description: unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  /pets/{petId}:
    get:
      summary: Info for a specific pet
      operationId: showPetById
      tags:
        - pets
      parameters:
        - name: petId
          in: path
          required: true
          description: The id of the pet to retrieve
          schema:
            type: string
      responses:
        '200':
          description: Expected response to a valid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Pet"
        default:
          description: unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
components:
  schemas:
    Pet:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        tag:
          type: string
    Pets:
      type: array
      maxItems: 100
      items:
        $ref: "#/components/schemas/Pet"
    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: integer
          format: int32
        message:
          type: string
```

示例三：空白模板

```json Blank [expandable]
{
  "openapi": "3.1.0",
  "info": {
    "title": "Untitled",
    "description": "Your OpenAPI specification",
    "version": "v1.0.0"
  },
  "servers": [
    {
      "url": ""
    }
  ],
  "paths": {},
  "components": {
    "schemas": {}
  }
}
```

### 使用 Cloudflare Workers 快速部署自定义工具

<Tip>
  如果你不想从头开始创建 OpenAPI 规范，可以参考由社区提供的以下工具快速部署自定义 API。
</Tip>

你可以利用 [dify-tools-worker](https://github.com/crazywoola/dify-tools-worker) 来快速部署自定义工具。该项目提供了：

- 可直接导入 Dify 的 OpenAPI 文档路由：`https://difytoolsworker.yourname.workers.dev/doc`
- 完整的 API 实现代码，可以直接部署到 Cloudflare Workers

<Steps>
  <Step title="克隆仓库">
  ```bash
  git clone https://github.com/crazywoola/dify-tools-worker.git
  ```
  </Step>
  
  <Step title="部署到 Cloudflare">
  按照项目 README 中的说明部署到你的 Cloudflare Workers 账户
  </Step>
  
  <Step title="在 Dify 中导入">
  在创建自定义工具时，使用 URL 导入方式，填入你的 Workers 地址加上 `/doc` 路径
  </Step>
</Steps>

{/*
Contributing Section
DO NOT edit this section!
It will be automatically generated by the script.
*/}

<CardGroup cols="2">
    <Card
        title="编辑此页面"
        icon="pen-to-square"
        href="https://github.com/langgenius/dify-docs-mintlify/edit/main/zh-hans/guides/tools/readme.mdx"
    >
        通过直接提交修改来帮助改进文档内容
    </Card>
    <Card
        title="提交问题"
        icon="github"
        href="https://github.com/langgenius/dify-docs-mintlify/issues/new?title=文档问题%3A%20&body=%23%23%20问题描述%0A%3C%21--%20请简要描述您发现的问题%20--%3E%0A%0A%23%23%20页面链接%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs-mintlify%2Fblob%2Fmain%2Fzh-hans/guides/tools%2Freadme.mdx%0A%0A%23%23%20建议修改%0A%3C%21--%20如果有具体的修改建议，请在此说明%20--%3E%0A%0A%3C%21--%20感谢您对文档质量的关注！%20--%3E"
    >
        发现错误或有改进建议？请提交问题反馈
    </Card>
</CardGroup>

