---
title: Knowledge Retrieval
---

The Knowledge Retrieval node connects your workflow to your knowledge bases, enabling AI-powered question answering with your own data.

This is the foundation of RAG (Retrieval-Augmented Generation) applications. Instead of relying solely on the LLM's training data, you can query your own documents, databases, and knowledge repositories to provide accurate, up-to-date answers based on your specific content.

![](https://assets-docs.dify.ai/dify-enterprise-mintlify/en/guides/workflow/node/d90961c6d794d425a8e11df177315188.png)

## Why Knowledge Retrieval Matters

LLMs have impressive general knowledge, but they can't know your specific business information, recent updates, or proprietary data. Knowledge Retrieval bridges this gap by:

- **Grounding responses in facts**: Pull relevant context from your documents before generating answers
- **Maintaining accuracy**: Reference specific sources rather than hallucinating information  
- **Staying current**: Access recently updated information that wasn't in the LLM's training data
- **Providing citations**: Show users exactly where information comes from

## Setup Process

**1. Choose Your Query Source**

Select what users are asking about - typically `sys.query` from the Start node in chatflows, or any text variable from previous nodes. The query is limited to 200 characters, so consider preprocessing longer inputs if needed.

**2. Select Knowledge Base**

Connect to an existing knowledge base from your Dify workspace. Each node can query multiple knowledge bases simultaneously, which is useful for comprehensive information retrieval across different document collections.

Need to create a knowledge base first? See our [knowledge base creation guide](/en/guides/knowledge-base/create-knowledge-and-upload-documents).

**3. Apply Metadata Filtering (Optional)**

Narrow search results using document metadata like categories, dates, or custom tags. This is particularly useful for large knowledge bases where you want to limit retrieval to specific document types or time periods.

Learn more about [metadata filtering](/en/guides/knowledge-base/integrate-knowledge-within-application).

**4. Configure Retrieval Strategy**

Fine-tune how the search works - choose between different indexing methods, set the number of results to return, and configure similarity thresholds. These settings can be customized per-node, overriding the knowledge base defaults.

Details on retrieval strategies: [retrieval documentation](/en/guides/knowledge-base/retrieval-test-and-citation).

<img
src="https://assets-docs.dify.ai/2025/03/fbd43d558f83b355a1b18ac26a253b84.png"
className="mx-auto"
alt="Knowledge retrieval configuration interface"
/>

## Retrieval Modes

Dify provides two retrieval strategies optimized for different scenarios:

**N-to-1 Recall**: Uses function calling with a reasoning model to intelligently select the most relevant knowledge base and query it effectively. Best for workflows with multiple knowledge bases where you need smart routing.

**Multi-way Recall**: Queries multiple sources simultaneously and uses a Rerank model to sort results by relevance. Ideal when you want comprehensive coverage across all available knowledge sources.

![](https://assets-docs.dify.ai/dify-enterprise-mintlify/en/guides/workflow/node/4a3007cda9dfa50ddac3711693725dce.png)

## Integration with LLM Nodes

The Knowledge Retrieval node outputs structured results that integrate seamlessly with LLM nodes:

- **Context Variables**: Use the `result` output as a context variable in downstream LLM prompts
- **Citation Support**: Retrieved content includes source metadata for proper attribution  
- **Relevance Scoring**: Each result includes similarity scores to help filter or rank information

This creates the classic RAG pattern: retrieve relevant context, then generate responses grounded in that specific information.

{/*
Contributing Section
DO NOT edit this section!
It will be automatically generated by the script.
*/}

---

[Edit this page](https://github.com/langgenius/dify-docs/edit/main/en/guides/workflow/node/knowledge-retrieval.mdx) | [Report an issue](https://github.com/langgenius/dify-docs/issues/new?title=Documentation%20Issue%3A%20edge-retrie&body=%23%23%20Issue%20Description%0A%3C%21--%20Please%20briefly%20describe%20the%20issue%20you%20found%20--%3E%0A%0A%23%23%20Page%20Link%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fen/guides/workflow/node%2Fknowledge-retrieval.mdx%0A%0A%23%23%20Suggested%20Changes%0A%3C%21--%20If%20you%20have%20specific%20suggestions%20for%20changes%2C%20please%20describe%20them%20here%20--%3E%0A%0A%3C%21--%20Thank%20you%20for%20helping%20improve%20our%20documentation%21%20--%3E)

